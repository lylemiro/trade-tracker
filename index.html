<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trade Progress Tracker</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
</head>
<body>
    <header>
        <h1>Trade Progress Dashboard</h1>
        <div class="header-buttons">
            <button class="theme-toggle-button" id="themeToggle">Toggle Theme</button>
        </div>
    </header>

    <div class="container">

        <div class="card trade-data-card">
            <h2>Input Detailed Trade History</h2>
            <textarea id="tradeDataInput" rows="15" placeholder="
Instructions for pasting DETAILED trade history:

1.  **Copy all your detailed trade records directly.**
2.  **Each trade block MUST start with a crypto pair (e.g., 'BTC/USDT').**
3.  **Each piece of data (label and value) should be on a single line, separated by a single space.**
    * Example: `Time 2025-07-22 19:04`
    * Example: `PNL +2.36 USDT`
    * Example: `Order No. 579579592027456`
4.  Blank lines between trade blocks are fine.
5.  Lines that don't match expected patterns (like empty 'Side'/'Result' labels) will be ignored.

**Example of the expected format:**

BTC/USDT
NO. 25068412
Order No. 579579592027456
Time 2025-07-22 19:04
Opening Time 2025-07-22 19:15
Settlement Time 2025-07-22 19:20
Amount 3.19 USDT
Open Price (USDT) 118,913.38
Close Price (USDT) 118,913.49
PNL +2.36 USDT
ROI ≈ 73.98 %
Odd 74.16 %
Effective trading volume 3.19 USDT

(Continue pasting more detailed trade blocks separated by a blank line)"
></textarea>
            <button id="processDataButton">Process Detailed Trades</button>
        </div>

        <div class="card">
            <h2>Balance Overview</h2>
            <div class="card-content">
                <div class="card-row">
                    <span>Previous Balance:</span>
                    <span id="previousBalanceCombined" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Calculated Balance:</span>
                    <span id="calculatedBalanceCombined" class="value"></span>
                </div>
                <hr style="width:100%; border:0; border-top:1px solid var(--border-color); margin: 10px 0;">
                <div class="card-row">
                    <span>Actual Current Balance (USDT):</span>
                    <input type="number" id="actualCurrentBalanceUsdtInput" value="0" step="0.01">
                </div>
                <div class="card-row">
                    <span><strong>Discrepancy:</strong></span>
                    <span id="discrepancyCombined" class="value"></span>
                </div>
                <p style="font-size: 0.8em; color: var(--text-color-muted);">Discrepancy = Actual - Calculated. Positive means extra funds (deposits, bonuses, errors). Negative means missing funds (withdrawals, fees, unlogged losses).</p>
            </div>
        </div>

        <div class="card">
            <h2>Gains Summary</h2>
            <div class="card-content">
                <div class="card-row">
                    <span>Current Gain (USDT):</span>
                    <span id="currentGainUsdt" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Current Gain (₱):</span>
                    <span id="currentGainPhp" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Current ROI:</span>
                    <span id="currentRoi" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Previous Gain (USDT):</span>
                    <span id="previousGainUsdt" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Gain Difference (USDT):</span>
                    <span id="gainDifferenceUsdt" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Gain Difference (₱):</span>
                    <span id="gainDifferencePhp" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Last Trade Amount (USDT):</span>
                    <span id="lastTradeAmountUsdt" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Trade Amount Growth:</span>
                    <span id="tradeAmountGrowth" class="value"></span>
                </div>
            </div>
        </div>

        <div class="card trade-data-card" id="processedHistoryCard">
            <h3>Processed Trade History</h3>
            <div id="tradeHistoryOutput">
                <p>No trade data processed yet.</p>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Daily PNL Progress</h2>
            <div class="chart-container">
                <canvas id="dailyPnLChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Cumulative Balance Progress</h2>
            <div class="chart-container">
                <canvas id="cumulativeBalanceChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Daily ROI Progress</h2>
            <div class="chart-container">
                <canvas id="dailyRoiChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Projected Compounding Growth</h2>
            <div class="chart-container">
                <canvas id="projectedGrowthChart"></canvas>
            </div>
        </div>
        
        <div class="card">
            <h2>Streak Analytics</h2>
            <div class="card-content">
                <div class="card-row">
                    <span><strong>Current Win Streak:</strong></span>
                    <span id="currentWinStreak" class="value positive">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Longest Win Streak:</strong></span>
                    <span id="longestWinStreak" class="value positive">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Current Loss Streak:</strong></span>
                    <span id="currentLossStreak" class="value negative">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Longest Loss Streak:</strong></span>
                    <span id="longestLossStreak" class="value negative">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Total Trades:</strong></span>
                    <span id="totalTrades" class="value">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Total Wins:</strong></span>
                    <span id="totalWins" class="value positive">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Total Losses:</strong></span>
                    <span id="totalLosses" class="value negative">0</span>
                </div>
                <div class="card-row">
                    <span><strong>Win Rate:</strong></span>
                    <span id="winRate" class="value">0%</span>
                </div>
            </div>
        </div>
        
        <div class="card" id="calculatedGoalsCard">
            <h2>Calculated Goals</h2>
            <div class="card-content">
                <div class="card-row">
                    <span>Target Balance:</span>
                    <span id="targetBalanceCombined" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Total Gains:</span>
                    <span id="totalGainsCombined" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Wallet Balance Needed:</span>
                    <span id="walletBalanceNeededCombined" class="value"></span>
                </div>
                <hr style="width:100%; border:0; border-top:1px solid var(--border-color); margin: 10px 0;">
                <div class="card-row">
                    <span>Days Remaining (Linear Target):</span>
                    <span id="daysRemainingLinear" class="value"></span>
                </div>
                 <div class="card-row">
                    <span>Days Remaining (Selected Projection):</span>
                    <span id="daysRemainingCompounding" class="value"></span>
                </div>
                 <hr style="width:100%; border:0; border-top:1px solid var(--border-color); margin: 10px 0;">
                <div class="card-row">
                    <span>Target Trading Volume (USDT):</span>
                    <input type="number" id="targetTradingVolumeInput" value="300" step="1">
                </div>
                <div class="card-row">
                    <span>Current Total Trading Volume:</span>
                    <span id="currentTotalTradingVolume" class="value"></span>
                </div>
                <div class="card-row">
                    <span>Days Remaining (Volume Target):</span>
                    <span id="daysRemainingVolumeTarget" class="value"></span>
                </div>
            </div>
        </div>
        
        <div class="card" id="financialGoalsCard">
            <h2>Financial Goals & Settings</h2>
            <div class="card-content">
                <div class="card-group">
                    <h4>Core Financial Inputs</h4>
                    <div class="card-row">
                        <span>USDT/PHP Rate:</span>
                        <input type="number" id="usdtPhpRate" value="56.81" step="0.01">
                    </div>
                    <div class="card-row">
                        <span>Target Monthly Income (₱):</span>
                        <input type="number" id="targetMonthlyIncomePhp" value="50000" step="100">
                    </div>
                    <div class="card-row">
                        <span>Starting Balance (USDT):</span>
                        <input type="number" id="startingBalanceUsdt" value="301" step="0.01">
                    </div>
                </div>

                <div class="card-group">
                    <h4>Projection Settings</h4>
                    <div class="projection-method-selection">
                        <label>
                            <input type="radio" name="projectionMethod" value="percent" id="projectionMethodPercent">
                            By % Gain Per Trade
                        </label>
                        <label>
                            <input type="radio" name="projectionMethod" value="fixedRoi" id="projectionMethodFixedRoi">
                            By Fixed Trade Amt & ROI
                        </label>
                    </div>
                    <div class="card-row">
                        <span>Projection Period (Days):</span>
                        <input type="number" id="projectionPeriodDaysInput" value="90" step="1">
                    </div>
                    <div class="card-row">
                        <span>Trades Per Day:</span>
                        <input type="number" id="tradesPerDayInput" value="2" step="1">
                    </div>

                    <div id="percentProjectionInputs" style="display: none;">
                        <div class="card-group-subsection">
                            <h5>% Gain Projection Details</h5>
                            <div class="card-row">
                                <span>Projected Gain Per Trade (%):</span>
                                <input type="number" id="projectedGainPerTradeInput" value="1" step="0.1">
                            </div>
                        </div>
                    </div>

                    <div id="fixedRoiProjectionInputs" style="display: none;">
                        <div class="card-group-subsection">
                            <h5>Fixed Amount & ROI Projection Details</h5>
                            <div class="card-row">
                                <span>Projected Trade Amount (USDT):</span>
                                <input type="number" id="projectedTradeAmountInput" value="3.00" step="0.01">
                            </div>
                            <div class="card-row">
                                <span>Projected ROI Per Trade (%):</span>
                                <input type="number" id="projectedRoiPerTradeInput" value="70" step="1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>Trading Schedule Planner</h2>
            <div class="card-content">
                <textarea id="schedulePlannerInput" rows="5" placeholder="e.g., Monday: 9 AM - 12 PM, Focus on BTC/USDT..."></textarea>
                <p>Your schedule will auto-save.</p>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Daily Trade Volume</h2>
            <div class="chart-container">
                <canvas id="dailyVolumeChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Balance Discrepancy Over Time</h2>
            <div class="chart-container">
                <canvas id="discrepancyChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Monthly PNL Progress</h2>
            <div class="chart-container">
                <canvas id="monthlyPnLChart"></canvas>
            </div>
        </div>

        <div class="card chart-card">
            <h2>Monthly Trade Volume</h2>
            <div class="chart-container">
                <canvas id="monthlyVolumeChart"></canvas>
            </div>
        </div>

        <div class="reset-button-bottom-container">
            <button class="reset-button-bottom" id="resetDataButtonBottom">Reset All Data</button>
        </div>
    </div>

    <audio id="winSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_73138b3213.mp3" preload="auto"></audio>
    <audio id="lossSound" src="https://cdn.pixabay.com/audio/2021/08/04/audio_593713fba2.mp3" preload="auto"></audio>

    <div class="setup-modal-overlay" id="setupModalOverlay">
        <div class="setup-modal-content">
            <h2 id="setupModalTitle">Welcome to Your Trade Tracker!</h2>
            <div id="setupModalBody">
                </div>
            <div class="setup-modal-navigation">
                <button id="setupPrevButton" disabled>Previous</button>
                <button id="setupNextButton">Next</button>
                <button id="setupStartButton" class="start-tracking-button" style="display: none;">Start Tracking!</button>
            </div>
            <div class="setup-modal-progress">
                Step <span id="currentStepNumber">1</span> of <span id="totalStepsNumber"></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>